<!--
   -- Git Wizard Steps
   -->
<wz-step wz-title="Repository Properties" wz-disabled="{{!vm.wizardActive}}">
    <h1>Enter the credentials for the destination git repository</h1>

    <form name="git-credentials-form" class="form-horizontal ds-export-git-credentials-form" role="form">
        <div class="form-group">
            <label class="control-label col-sm-2" for="git-repo-dest">Repository Url:</label>
            <div class="col-sm-10" uib-tooltip="The URL location of the git repository to use as the destination storage">
                <input type="text" class="form-control" id="git-repo-dest" ng-model="vm.parameters['repo-path-property']" placeholder="Enter git repository url" required>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-2" for="git-repo-branch">Repository Branch:</label>
            <div class="col-sm-10" uib-tooltip="The branch that should be checked out of the repository. If not specified then the  master branch is assumed.">
                <input type="text" class="form-control" id="git-repo-branch" ng-model="vm.parameters['repo-branch-property']" placeholder="Enter git repository branch, eg. master">
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-2" for="git-repo-file-path">Relative File Path:</label>
            <div class="col-sm-10" uib-tooltip="The relative (to the repository root directory) path of the file. It is enough to specify only the name of the file.">
                <input type="text" class="form-control" id="git-repo-file-path" ng-model="vm.parameters['file-path-property']" placeholder="Enter the relative file path or just the name of the destination filename" required>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-2" for="git-repo-author">Author Name:</label>
            <div class="col-sm-10" uib-tooltip="Specifies the name of the author to be used when commiting to the repository">
                <input type="text" class="form-control" id="git-repo-author" ng-model="vm.parameters['author-name-property']" placeholder="Enter the name of the author">
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-sm-2" for="git-repo-author-email">Author Email Address:</label>
            <div class="col-sm-10" uib-tooltip="Specifies the email address of the author to be used when commiting to the repository">
                <input type="text" class="form-control" id="git-repo-author-email" ng-model="vm.parameters['author-email-property']" placeholder="Enter the email address of the author">
            </div>
        </div>

        <div>
            <h2>Authentication Settings</h2>
            <uib-accordion close-others="true">
                <!-- SSH -->
                <uib-accordion-group heading="SSH" is-open="true">
                    <uib-tabset>
                        <uib-tab heading="Private Key Authentication">
                            <div class="private-key-auth-form">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="repo-known-hosts">Known Hosts File:</label>
                                    <div class="col-sm-9" uib-tooltip="Specifies the file containing the ssh known hosts for key-based authentication">
                                        <input type="file" name="git-private-key" file-input-handler="vm.onAllowHostsChange">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="repo-private-key">Private Key File:</label>
                                    <div class="col-sm-9" uib-tooltip="Specifies the file containing the ssh private key for key-based authentication">
                                        <input type="file" name="git-private-key" file-input-handler="vm.onPrivateKeyChange">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="git-ssh-repo-passphrase">Passphrase:</label>
                                    <div class="col-sm-9" uib-tooltip="Specifies the ssh passphrase for key-based authentication">
                                        <input type="password" class="form-control" id="git-ssh-repo-passphrase" ng-model="vm.parameters['repo-passphrase-property']"
                                               placeholder="Enter the passphrase">
                                    </div>
                                </div>
                            </div>
                        </uib-tab>

                        <uib-tab heading="Password Authentication">
                            <div class="password-auth-form">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="repo-known-hosts">Known Hosts File:</label>
                                    <div class="col-sm-9" uib-tooltip="Specifies the file containing the ssh known hosts for key-based authentication">
                                        <input type="file" name="git-private-key" file-input-handler="vm.onAllowHostsChange">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="git-ssh-repo-password">Password:</label>
                                    <div class="col-sm-9" uib-tooltip="Specifies the ssh password for password-based authentication">
                                        <input type="password" class="form-control" id="git-ssh-repo-password" ng-model="vm.parameters['repo-password-property']" placeholder="Enter the password">
                                    </div>
                                </div>
                            </div>
                        </uib-tab>
                    </uib-tabset>

                </uib-accordion-group>

                <!-- HTTP -->
                <uib-accordion-group heading="HTTP">
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="git-repo-username">User Name:</label>
                        <div class="col-sm-10" uib-tooltip="Specifies the user name for HTTP authentication">
                            <input type="text" class="form-control" id="git-repo-username" ng-model="vm.parameters['repo-username-property']" placeholder="Enter the user name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="git-http-repo-password">Password:</label>
                        <div class="col-sm-10" uib-tooltip="Specifies the password for HTTP authentication">
                            <input type="password" class="form-control" id="git-http-repo-password" ng-model="vm.httpClearPassword" placeholder="Enter the password">
                        </div>
                    </div>
                </uib-accordion-group>
            </uib-accordion>
        </div>
    </form>

    <input type="submit" wz-previous value="Previous" />
    <input type="submit" wz-next value="Next" />
</wz-step>

<wz-step wz-title="Commit to Repository" wz-disabled="{{!vm.wizardActive}}">
    <h1>Export the artifact to the repository</h1>

    
    <div class="ds-export-git-page">
        <!-- Show progress bar on export -->
        <div class="ds-export-git-page-progress" ng-show="vm.inProgress">
            <uib-progressbar class="progress-striped active" value="dynamic" type="info"></uib-progressbar>
        </div>

        <div ng-show="!vm.inProgress">
            <div class="ds-export-git-page-button">
                <a class="btn btn-default btn-primary" ng-click="vm.onExportDataServiceClicked()">Export</a>
            </div>
            <div class="ds-export-git-page-response">
                <div ng-class="vm.responseStyleClass">{{vm.response}}</div>
            </div>

            <div class="ds-export-git-page-error">
                {{vm.error}}
            </div>
        </div>
    </div>

    <input type="submit" wz-previous value="Previous" />
    <input type="submit" wz-finish value="Finish" />
</wz-step>
